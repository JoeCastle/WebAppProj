//https://github.com/mobxjs/awesome-mobx#examples

/*
 CRUD
 https://hk.saowen.com/a/61eb2b31fd659efb1accf6675455f3865533824b08a4dcfe3512cd8956dea867
 https://dzone.com/articles/how-to-structure-your-mobx-app-for-the-real-world
 https://www.youtube.com/watch?v=HPIjjFGYSJ4
 https://moduscreate.com/blog/ext-js-to-react-handling-data-with-mobx/
 https://medium.com/@KozhukharenkoN/react-form-validation-with-mobx-8ce00233ae27
 */

//http://jasonwatmore.com/post/2018/06/26/aspnet-core-21-simple-api-for-authentication-registration-and-user-management
//http://jasonwatmore.com/post/2017/09/16/react-redux-user-registration-and-login-tutorial-example
//https://github.com/gothinkster/react-mobx-realworld-example-app
//https://github.com/foxhound87/mobx-react-form
//https://medium.com/@foxhound87/automagically-manage-react-forms-state-with-mobx-and-automatic-validation-2b00a32b9769
//https://codesandbox.io/s/nrrZgG8y4
//https://moduscreate.com/blog/ext-js-to-react-handling-data-with-mobx/
//https://www.youtube.com/watch?v=M4kk3Ac0WSM&feature=youtu.be //https://github.com/benawad/gello-world/tree/2_login
//https://medium.com/@KozhukharenkoN/react-form-validation-with-mobx-8ce00233ae27
//https://medium.appbase.io/how-to-implement-authentication-for-your-react-app-cf09eef3bb0b
//https://code-maze.com/react-series/
//https://itnext.io/a-memo-on-how-to-implement-azure-ad-authentication-using-react-and-net-core-2-0-3fe9bfdf9f36
//https://code-maze.com/authentication-aspnetcore-jwt-1/
//https://github.com/Intellemerc/CreateWebApiApp/blob/master/ReactWebApi/Controllers/AccountController.cs
//https://codingblast.com/asp-net-core-signalr-chat-react/
//http://blog.stevensanderson.com/2016/05/02/angular2-react-knockout-apps-on-aspnet-core/
//https://dzone.com/articles/cookie-authentication-with-aspnet-core-20
//https://www.c-sharpcorner.com/article/asp-net-core-working-with-cookie/
//http://codereform.com/blog/post/asp-net-core-2-0-cookie-authentication-local-logins/
//https://medium.com/@rossbulat/using-cookies-in-react-redux-and-react-router-4-f5f6079905dc
//https://stackoverflow.com/questions/34360874/how-to-build-authorization-based-systems-with-react

//---------
//https://stormpath.com/blog/build-a-react-app-with-user-authentication
//https://developer.okta.com/blog/2018/02/06/build-user-registration-with-node-react-and-okta
//https://dzone.com/articles/build-a-react-application-with-user-authentication
//---------

/*
 * IdentiyServer
 Use Identity - using Microsoft.IdentityModel.Tokens; - using System.IdentityModel.Tokens.Jwt; - https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity?view=aspnetcore-2.2&tabs=visual-studio
 Use asp.net authorization - using Microsoft.AspNetCore.Authorization;
 https://www.youtube.com/watch?v=ApPRYnRYpno
 https://www.youtube.com/watch?v=WQywatfis6s
 https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity?view=aspnetcore-2.2&tabs=visual-studio
 https://stackoverflow.com/questions/47744565/can-we-secure-a-dotnet-core-2-0-react-app-with-only-aspnet-identity
 https://forums.asp.net/t/2113140.aspx?Identity+Login+using+Ajax+MVC
 https://kimsereyblog.blogspot.com/2017/09/implicit-flow-with-identity-server-and.html
 https://www.youtube.com/watch?v=6fvaDpxJxJo
 https://auth0.com/blog/developing-web-apps-with-asp-dot-net-core-2-dot-0-and-react-part-2/
 https://blog.johnnyreilly.com/2018/01/auth0-typescript-and-aspnet-core.html //https://github.com/johnnyreilly/auth0-react-typescript-asp-net-core //https://community.auth0.com/t/get-user-data-server-side-what-is-a-good-approach/9193

//Uses react-apollo/graphql
https://www.youtube.com/watch?v=01Dc5mtm1wQ
https://www.youtube.com/watch?v=M4kk3Ac0WSM
https://github.com/benawad/gello-world/tree/2_login

//Try these:
 https://medium.com/@geekrodion/blog-with-asp-net-core-and-react-redux-part-1-authentication-94b11b1a1bc4 //https://github.com/RodionChachura/simple-blog-back //https://github.com/RodionChachura/simple-blog-front

 https://github.com/gothinkster/react-mobx-realworld-example-app //https://github.com/gothinkster/react-mobx-realworld-example-app/blob/master/src/stores/authStore.js

https://hackernoon.com/how-to-decouple-state-and-ui-a-k-a-you-dont-need-componentwillmount-cc90b787aa37 //https://github.com/mweststrate/state-routing-blog-sources
https://stackoverflow.com/questions/35850871/how-to-connect-state-to-props-with-mobx-js-observer-when-use-es6-class/36164488#36164488

 http://jasonwatmore.com/post/2017/09/16/react-redux-user-registration-and-login-tutorial-example
 http://jasonwatmore.com/post/2018/08/14/aspnet-core-21-jwt-authentication-tutorial-with-example-api
 http://jasonwatmore.com/post/2017/12/07/react-redux-jwt-authentication-tutorial-example
 http://jasonwatmore.com/post/2018/06/26/aspnet-core-21-simple-api-for-authentication-registration-and-user-management
 https://www.pointblankdevelopment.com.au/blog/135/react-redux-with-aspnet-core-20-login-registration-tutorial-example#user-service-js
 https://www.pointblankdevelopment.com.au/blog/135/react-redux-with-aspnet-core-20-login-registration-tutorial-example //https://github.com/cornflourblue/aspnet-core-react-registration-login-example

https://dzone.com/articles/creating-a-chat-application-using-react-and-aspnet-3
https://www.c-sharpcorner.com/article/asp-net-core-2-0-session-state/
https://www.codeproject.com/Articles/1204081/ASP-NET-Core-Session-State
https://dzone.com/articles/session-state-in-aspnet-core-and-mvc-core
https://code.msdn.microsoft.com/Session-State-In-ASPNET-5332f9f3
https://www.c-sharpcorner.com/article/how-to-use-session-in-asp-net-core/
https://dzone.com/articles/the-aspnet-core-react-project
http://www.soloco.be/realtimeweb-react-authentication-on-asp-net-core/ - https://github.com/tim-cools/RealTimeWeb.NET
https://jonhilton.net/2017/10/11/secure-your-asp.net-core-2.0-api-part-1---issuing-a-jwt/
https://habr.com/post/350298/ - https://github.com/unpub777/PersonalPortal
https://fullstackmark.com/post/13/jwt-authentication-with-aspnet-core-2-web-api-angular-5-net-core-identity-and-facebook-login - https://github.com/mmacneil/AngularASPNETCore2WebApiAuth
https://hackernoon.com/introducing-real-time-react-spa-template-for-net-core-2-0-f13e64c3b7e9
https://poznajprogramowanie.pl/course-asp-net-core-react-part-1/ - https://github.com/Lazys/Getting-started-on-ASP.NET-Core-React-software-house
https://docs.microsoft.com/en-us/aspnet/core/fundamentals/app-state?view=aspnetcore-2.2
https://github.com/dsuryd/dotNetify
https://github.com/dsuryd/dotnetify-react-demo-vs2017/tree/master/ReactTemplate
https://code-maze.com/authentication-aspnetcore-jwt-1/
https://fullstackmark.com/post/10/user-authentication-with-angular-and-asp-net-core
https://fullstackmark.com/post/19/jwt-authentication-flow-with-refresh-tokens-in-aspnet-core-web-api
https://fullstackmark.com/post/16/user-authentication-with-vuejs-aspnet-core-2-and-facebook-login
https://docs.microsoft.com/en-us/aspnet/core/security/authorization/secure-data?view=aspnetcore-2.2
https://www.youtube.com/watch?v=-50ntzz18XU
https://www.youtube.com/watch?v=CJIrmzHoY_M
https://stackoverflow.com/search?q=asp.net+core+spa+authentication
https://stackoverflow.com/questions/47437430/authenticating-to-asp-net-core-2-0-mvc-application-cookie-and-rest-api-jwt-s
https://stackoverflow.com/search?q=asp.net+core+react+authentication
https://stackoverflow.com/questions/29048122/token-based-authentication-in-asp-net-core?rq=1
https://stackoverflow.com/questions/549/the-definitive-guide-to-form-based-website-authentication?rq=1
https://stackoverflow.com/questions/50440761/asp-net-core-2-0-react-js-cookie-authentication-isomorphic-fetch-endless-loop
https://stackoverflow.com/questions/45805411/asp-net-core-2-0-authentication-middleware?rq=1
https://stackoverflow.com/questions/51070354/authenticated-request-for-index-html-in-asp-net-core-react-app?rq=1
https://stackoverflow.com/questions/46036516/asp-net-reactredux-tracking-a-user-who-has-logged-in?rq=1
https://stackoverflow.com/questions/50299798/when-to-get-jwt-token-in-asp-net-core-spa-app
https://stackoverflow.com/questions/52194078/handling-id-token-in-asp-net-core-api - https://auth0.com/docs/libraries/auth0js/v9
https://stackoverflow.com/questions/50416989/configuring-public-route-in-asp-net-core-spa-app
https://stackoverflow.com/questions/47825636/using-azure-active-directory-authentication-in-asp-net-core-2-0-from-web-app-to
https://stackoverflow.com/questions/53840816/jwt-based-authentication-in-asp-net-core-spa-front-end-validation
https://www.reddit.com/r/csharp/comments/89q2vo/aspnet_core_auth_w_react/ - https://github.com/bharney/JSStarterDocker
https://www.reddit.com/r/dotnet/comments/5ilqjh/authentication_and_identity_in_a_single_page_app/
https://www.reddit.com/r/dotnet/comments/498lov/check_out_my_starter_template_for_using_react_in/ - https://github.com/pauldotknopf/react-aspnet-boilerplate
https://www.reddit.com/r/dotnet/comments/6vpvt5/any_ideas_on_dotnet_core_20_and_spa_authentication/
https://www.youtube.com/watch?v=TRKEuYUajKA
https://www.reddit.com/r/reactjs/comments/7xrk5y/developing_web_apps_with_aspnet_core_20_and_react/
https://www.reddit.com/r/reactjs/comments/82fxnb/user_account_registration/
https://stackoverflow.com/questions/54100640/authentication-for-dotnet-core-spa-template
https://stackoverflow.com/search?q=asp.net+core+spa+authorization
https://docs.microsoft.com/en-us/aspnet/core/security/authentication/identity?view=aspnetcore-2.1&tabs=visual-studio

LOCAL STORAGE
https://www.reddit.com/r/reactjs/comments/7n6spn/help_with_jwt_authentication/ - look into local storage. Should be queried on page load, can this be acessed by all components, or the main component and passed down, or a single store that can be accessed by other stores, see how to acess multiple mobx stores.
Research local storage, session storage, cookies with javascript
https://dev.to/rdegges/please-stop-using-local-storage-1i04
Don't store user ids, session ids, jwts etc in local storage as it is not secure.
Use a "server-side session" and cookies. See: https://dev.to/rdegges/please-stop-using-local-storage-1i04


//Up to here

See localStorage or session storage
https://hackernoon.com/how-to-take-advantage-of-local-storage-in-your-react-projects-a895f2b2d3f2
https://medium.com/@siobhanpmahoney/local-storage-in-a-react-single-page-application-34ba30fc977d
https://www.robinwieruch.de/local-storage-react/
https://www.reddit.com/r/reactjs/comments/83cfka/handling_login_actions_after_authentication/
https://www.reddit.com/r/reactjs/comments/7n6spn/help_with_jwt_authentication/
https://www.reddit.com/r/reactjs/comments/6ouuma/using_json_web_tokens_with_react_only_not_redux/
https://www.reddit.com/r/reactjs/comments/6xpfvi/advice_on_login_authentication/
https://www.reddit.com/r/reactjs/comments/aajr2q/need_help_with_privateroute/
https://www.reddit.com/r/reactjs/comments/9ji93d/how_to_handle_login_in_react/
https://www.reddit.com/r/reactjs/comments/9if3eh/confused_on_implementing_login_system_in_a_react/


Could for example store entered values into local storage, if they refresh they keep the entered data.
Mimic a login system with localStorage. Form sends login details to local storage, uses that to persist the "session".

Fake login: https://jonhilton.net/connecting-react-to-asp-net-core-web-api/

End localStorage

Search by single page app (SPA) and authintication/authorization with .net core 2.0

SampleCode > MobxApp
ExampleReactMobx
 */

/* Other
 * https://github.com/contacts-mvc/mobx-react-typescript
 * https://github.com/piotrwitek/training-management-tool
 * https://github.com/gothinkster/react-mobx-realworld-example-app //https://github.com/gothinkster/react-mobx-realworld-example-app/blob/master/src/stores/authStore.js
 * https://react.rocks/tag/Login
 * https://medium.com/technoetics/create-basic-login-forms-using-create-react-app-module-in-reactjs-511b9790dede
 * https://serverless-stack.com/chapters/create-a-login-page.html
 * https://alligator.io/react/simple-authorization/ - client-side
 * https://www.npmjs.com/package/react-router-role-authorization
 * https://marmelab.com/react-admin/index.html
 * https://labnotes.panderalabs.com/access-control-in-a-react-ui-71f1df60f354
 * https://hackernoon.com/role-based-authorization-in-react-c70bb7641db4
 * https://github.com/burczu/react-router-role-authorization
 * https://tylermcginnis.com/react-router-protected-routes-authentication/
 * https://stackoverflow.com/questions/49390063/how-to-use-role-based-authentication-in-react-router-dom
 * 
 */

import * as React from 'react';
import { RouteComponentProps } from 'react-router';
import { AuthStore } from '../stores/AuthStore/AuthStore';
import { inject, observer } from 'mobx-react';

interface Props extends RouteComponentProps<any>, React.Props<any> {
    authStore: AuthStore
}

@inject('authStore')
@observer
export class Login extends React.Component<Props> {
    public render() {
        return <div className="page login-page">
            <h1>This is the login page</h1>
            <p>Please login with your details below</p>
            <form onSubmit={this.formSubmit}>
                <label htmlFor='username'>Username:</label>
                <input
                    className="textbox"
                    id='username'
                    type='text'
                    placeholder='Username'
                    autoComplete='off'
                    required
                    /*onChange={(e) => {
                        this.props.setFieldValue('email', e.target.value);
                    }}*/
                    //value={this.props.email}
                    onChange={this.onUsernameChange}

                />
                <label htmlFor='password'>Password:</label>
                <input
                    className="textbox"
                    id='password'
                    type='password'
                    placeholder='Password'
                    autoComplete='off'
                    required
                    onChange={this.onPasswordChange}
                />
                <button className='login-button'
                    onClick={
                        this.login
                    }
                    > Login
                </button>
            </form>
            <button
                onClick={
                    this.logout
                }
            >
                Logout
            </button>
        </div>;
    }

    private formSubmit = () => {
        
    }

    private login = (e: any) => {
        console.log(this.props.authStore.isLoggedIn);
        this.props.authStore.userLogin();
        console.log(this.props.authStore.isLoggedIn);

        //Prevent the page from refreshing when the form is submitted
        e.preventDefault();
        setTimeout(250);
        this.props.history.push('/');
    }

    private onUsernameChange = (e: React.ChangeEvent<HTMLInputElement>) => {
        let name = e.target.value;

        this.props.authStore.onUsernameChange(name);

        //console.log(this.props.authStore.username);
    }

    private onPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
        let password = e.target.value;

        this.props.authStore.onPasswordChange(password);

        //console.log(this.props.authStore.password);
    }

    private logout = () => {
        this.props.authStore.logout();
    }
}